---
title: "Create a regular order using the Checkout API"
slug: "test-spotlight"
hidden: false
createdAt: "2023-07-18T17:08:52.219Z"
updatedAt: "2023-07-18T17:08:52.219Z"
excerpt: "Learn how place orders using VTEX APIs to handle shopping carts and checkout."
hideTOC: true
---

This step-by-step guide will walk you through the process of using the [Checkout API](https://developers.vtex.com/docs/api-reference/checkout-api) for handling the placement, payment, and delivery aspects of a regular order, with all responsibilities managed within the scope of a single account. This process consists of the following steps:

1. **Assess cart requirements:** The process initiates with the simulation of a cart to assess the available delivery and payment options. Additionally, since indicating an email address is necessary to place an order, this step also includes verifying the existence of a customer by cross-referencing their email address in the database.
2. **Assemble the cart:** After assessing the cart requirements, the next step is to assemble the cart, ensuring that all essential order information is organized accurately under the [`orderForm`](https://developers.vtex.com/docs/guides/orderform-fields) object.
3. **Handle the order:** This step involves placing the order on the VTEX platform, sending the necessary payment data to resolve the order payment and processing order details.
4. **Processing and validating the order:** The process ends with a verification procedure to confirm the successful placement of the order.

<CH.Spotlight>

<CH.Code>

```shell Shell mark=2[18:30],2[32:44],5[32:39],6[34:43]
curl --request post \
  --url 'https://{accountname}.{environment}.com.br/api/checkout/pub/orderForms/simulation?RnbBehavior=0' \
  --header 'Accept: application/json' \
  --header 'Content-Type: application/json' \
  --header 'X-VTEX-API-AppKey: {appKey}' \
  --header 'X-VTEX-API-AppToken: {appToken}' \
  --data '{"items":[{"id":"1","quantity":1,"seller":"1"}],"country":"BRA","postalCode":"12345-000","geoCoordinates":[-47.924747467041016]}'
```

```python Python
import http.client

conn = http.client.HTTPSConnection("{accountname}.{environment}.com.br")

payload = "{\"items\":[{\"id\":\"1\",\"quantity\":1,\"seller\":\"1\"}],\"country\":\"BRA\",\"postalCode\":\"12345-000\",\"geoCoordinates\":[-47.924747467041016]}"

headers = {
    'Accept': "application/json",
    'Content-Type': "application/json",
    'X-VTEX-API-AppKey': "",
    'X-VTEX-API-AppToken': ""
    }

conn.request("post", "/api/checkout/pub/orderForms/simulation?RnbBehavior=0", payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))
```

```js Node.js mark=5[15:27],5[29:41]
const http = require("https");

const options = {
 "method": "post",
 "hostname": "{accountname}.{environment}.com.br",
 "port": null,
 "path": "/api/checkout/pub/orderForms/simulation?RnbBehavior=0",
 "headers": {
  "Accept": "application/json",
  "Content-Type": "application/json",
  "X-VTEX-API-AppKey": "",
  "X-VTEX-API-AppToken": ""
 }
};

const req = http.request(options, function (res) {
 const chunks = [];

 res.on("data", function (chunk) {
  chunks.push(chunk);
 });

 res.on("end", function () {
  const body = Buffer.concat(chunks);
  console.log(body.toString());
 });
});

req.write(JSON.stringify({
  items: [{id: '1', quantity: 1, seller: '1'}],
  country: 'BRA',
  postalCode: '12345-000',
  geoCoordinates: [-47.924747467041016]
}));
req.end();
```

```json Response
{
  "allowManualPrice": boolean,
  "canEditData": boolean,
  "clientPreferencesData": {},
  "clientProfileData": {},
  "commercialConditionData": {},
  "customData": {},
  "giftRegistryData": {},
  "hooksData": {},
  "ignoreProfileData": boolean,
  "isCheckedIn": boolean,
  "itemMetadata": {},
  "items": [],
  "itemsOrdination": {},
  "loggedIn": boolean,
  "marketingData": {},
  "messages": [],
  "openTextField": {},
  "orderFormId": string,
  "paymentData": {},  
  "ratesAndBenefitsData": {},
  "salesChannel": string,
  "selectableGifts": [],
  "sellers": {},
  "shippingData": {},
  "storeId": {},
  "storePreferencesData": {},
  "totalizers": {},
  "userProfileId": {},
  "userType": {},
  "value": number
}
```

```json orderForm.json
{
  "allowManualPrice": boolean,
  "canEditData": boolean,
  "clientPreferencesData": {},
  "clientProfileData": {},
  "commercialConditionData": {},
  "customData": {},
  "giftRegistryData": {},
  "hooksData": {},
  "ignoreProfileData": boolean,
  "isCheckedIn": boolean,
  "itemMetadata": {},
  "items": {},
  "itemsOrdination": {},
  "loggedIn": boolean,
  "marketingData": {},
  "messages": [],
  "openTextField": {},
  "orderFormId": string,
  "paymentData": {},  
  "ratesAndBenefitsData": {},
  "salesChannel": "1",
  "selectableGifts": {},
  "sellers": {},
  "shippingData": {},
  "storeId": {},
  "storePreferencesData": {},
  "totalizers": {},
  "userProfileId": {},
  "userType": {},
  "value": number
}
```

</CH.Code>

## Before you begin

Before proceeding any further, ensure that you have a valid `appKey` and `appToken` granted with the necessary permissions to access the Checkout and Payments Gateway APIs. For more information, please refer to the [Roles](https://help.vtex.com/en/tutorial/roles--7HKK5Uau2H6wxE1rH5oRbc) article.

> ✅ Click the steps below to navigate through this article and explore specific topics. Relevant code will be highlighted and focused for your convenience.

---

## Step 1 - Assessing cart requirements

In this step, we will check if your store is able to fulfill the cart and collect the necessary information about the order to ensure a smooth order placement process in the subsequent steps.

### Simulating a cart

This step will provide essential information regarding the available delivery and payment options for the specific combination of items in the cart.

- Send a request to the [`Cart simulation`](https://developers.vtex.com/docs/api-reference/checkout-api#post-/api/checkout/pub/orderForms/simulation) API endpoint. You must specify an SKU ID (`items.id`), the number of items in the cart (`items.quantity`), and the Seller's ID (`items.seller`) in the request body.
- Take note of the `items`, `shippingData.logisticsInfo`, and `paymentData` objects as we will use this data in the following steps.

<CH.Code show={["Shell", "Python", "Node.js", "Body"]}>

```shell Shell mark=2[18:30],2[32:44],5[32:39],6[34:43]
```

```python Python mark=3[37:49],3[51:63]
```

```js Node.js mark=5[15:27],5[29:41]
```

---

```json Response mark=13,20,25
```

</CH.Code>

---

### Checking for existing customer

This step will check if the email used to place the order is already related to a customer in your database. This verification serves to not only enhance operational efficiency but also proactively prevent potential permission-related issues.

- Send a request to the [`Get client by email`](https://developers.vtex.com/docs/api-reference/checkout-api#get-/api/checkout/pub/profiles) endpoint to check for existing profiles associated with a specific email address. If the response to this request returns any content, it means that you already have this shopper’s information in your database. In such cases, you can seamlessly proceed to utilize this information in the subsequent steps, sparing the shopper from the need to provide it again.
- If applicable, take note of the `availableAddresses` and `userProfile` objects as we will use this data in the following steps.

<CH.Code show={["Shell", "Python", "Node.js", "Body"]}>

```shell Shell mark=2[18:30],2[32:44],2[85:98],5[32:39],6[34:43]
curl --request get \
  --url 'https://{accountname}.{environment}.com.br/api/checkout/pub/profiles?email={emailAddress}' \
  --header 'Accept: application/json' \
  --header 'Content-Type: application/json' \
  --header 'X-VTEX-API-AppKey: {appKey}' \
  --header 'X-VTEX-API-AppToken: {appToken}'
```

```python Python mark=3[37:49],3[51:63]
import http.client

conn = http.client.HTTPSConnection("{accountname}.{environment}.com.br")

headers = {
    'Accept': "application/json",
    'Content-Type': "application/json",
    'X-VTEX-API-AppKey': "",
    'X-VTEX-API-AppToken': ""
    }

conn.request("get", "/api/checkout/pub/profiles?email={emailAddress}", headers=headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))
```

```js Node.js mark=5[15:27],5[29:41]
const http = require("https");

const options = {
 "method": "get",
 "hostname": "{accountname}.{environment}.com.br",
 "port": null,
 "path": "/api/checkout/pub/profiles?email={emailAddress}",
 "headers": {
  "Accept": "application/json",
  "Content-Type": "application/json",
  "X-VTEX-API-AppKey": "",
  "X-VTEX-API-AppToken": ""
 }
};

const req = http.request(options, function (res) {
 const chunks = [];

 res.on("data", function (chunk) {
  chunks.push(chunk);
 });

 res.on("end", function () {
  const body = Buffer.concat(chunks);
  console.log(body.toString());
 });
});

req.end();
```

---

```json Response mark=6:20,24:35
{
  "userProfileId": string,
  "profileProvider": string,
  "availableAccounts": [],
  "availableAddresses": [
    {
      "addressType": string,
      "receiverName": string,
      "addressId": string,
      "isDisposable": boolean,
      "postalCode": string,
      "city": string,
      "state": string,
      "country": string,
      "street": string,
      "number": string,
      "neighborhood": string,
      "complement": null,
      "reference": null,
      "geoCoordinates": []
    }
  ],
  "userProfile": {
    "email": string,
    "firstName": string,
    "lastName": string,
    "document": string,
    "documentType": string,
    "phone": string,
    "corporateName": null,
    "tradeName": null,
    "corporateDocument": null,
    "stateInscription": null,
    "corporatePhone": null,
    "isCorporate": boolean,
    "profileCompleteOnLoading": null,
    "profileErrorOnLoading": null,
    "customerClass": null
  },
  "isComplete": boolean
}
```

</CH.Code>

---

## Step 2 - Assembling the cart

In this step, we will arrange the order details into the specified data format, following the [`orderForm`](https://developers.vtex.com/docs/guides/orderform-fields) data structure. This formatted cart data will be used as the request body in the following steps.

Below, we will briefly examine the key elements that make up the [`orderForm`](https://developers.vtex.com/docs/guides/orderform-fields), which include:

- `items`
- `clientProfileData`
- `shippingData.address`
- `shippingData.logisticsInfo`
- `paymentData`

Note that while an `orderForm` can have various element, a standard order typically consists of the ones mentioned above.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=5,13,25,20
```

</CH.Code>

---

### `items`

`items` is an array that contains all data pertinent to the SKUs being purchased. Build the `items` array using the `items` array obtained from the [Simulating a cart](#simulating-a-cart) step. For more complex examples, see the [Place order](https://developers.vtex.com/docs/api-reference/checkout-api#put-/api/checkout/pub/orders) API reference.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=2:9
{
  "items": [
      {
          "id": "1",
          "quantity": 1,
          "seller": "1",
          "price": 10000
      }
  ],
  "clientProfileData": {},
  "shippingData": {
      "address": {},
      "logisticsInfo": []
  },
  "paymentData": {}
}
```

</CH.Code>

---

### `clientProfileData`: New customers

`clientProfileData` contains information about the customer. If you noted the customer does not exist in your database during the [Checking for existing customer](#checking-for-existing-customer) step, build the `clientProfileData` object with the data of the new customer willing to place the order.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=3:16
{
  "items": [],
  "clientProfileData": {
      "email": "email@domain.com",
      "firstName": "First name",
      "lastName": "Last name",
      "document": "078051120",
      "documentType": "ssn",
      "phone": "1234567890",
      "corporateName": null,
      "tradeName": null,
      "corporateDocument": null,
      "stateInscription": null,
      "corporatePhone": null,
      "isCorporate": false
  },
  "shippingData": {
      "address": {},
      "logisticsInfo": []
  },
  "paymentData": {}
}
```

</CH.Code>

---

### `clientProfileData`: Existing customers

If the customer already exists in your datababe, use the `userProfile.email` obtained in the [Checking for existing customer](#checking-for-existing-customer) step to build the `clientProfileData` object. Note that the email address is enough to register the order to the shopper’s existing account.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=3:5
{
  "items": [],
  "clientProfileData": {
      "email": "email@domain.com"
  },
  "shippingData": {
      "address": {},
      "logisticsInfo": []
  },
  "paymentData": {}
}
```

</CH.Code>

---

### `shippingData.address`: New customers

`shippingData.address` contains information about the shipping address. If you noted the customer does not exist in your database during the [Checking for existing customer](#checking-for-existing-customer) step, build the `shippingData.address` object with the data of the new customer willing to place the order.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=4:19
{
  "items": [],
  "clientProfileData": {},
  "shippingData": {
      "address": {
          "addressType": "residential",
          "receiverName": "Testing VTEX",
          "postalCode": "33301",
          "city": "Fort Lauderdale",
          "state": "FL",
          "country": "USA",
          "street": "110 East Broward Blvd",
          "number": null,
          "neighborhood": null,
          "complement": "Suite 1700",
          "reference": null,
          "geoCoordinates": []
      }
  },
  "paymentData": {}
}
```

</CH.Code>

---

### `shippingData.address`: Existing customers

If the customer already exists in your datababe, use the desired `addressId` obtained from the [Checking for existing customer](#checking-for-existing-customer) step to build the `shippingData.address` block.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=4:8
{
  "items": [],
  "clientProfileData": {},
  "shippingAddress": {
      "address": {
          "addressId": "666c2e830bd9474ab6f6cc53fb6dd2d2"
      }
  },
  "paymentData": {}
}
```

</CH.Code>

---

### `shippingData.logisticsInfo`

`logisticsInfo` contains logistics information, such as the desired delivery option and freight cost for each item in the `items` array.

- Create the `logisticsInfo` array with the same number of objects as in the `items` array. For each object within the `logisticsInfo` array, define the following elements:

  - `itemIndex` - index of the corresponding item in the `items` array. For example, the object referring to the first item in the `items` array has an `itemIndex` of `0`.
  - `selectedSla` - desired delivery option. You can find the `id` value of the available options in the `slas` array obtained from the [Simulating a cart](#simulating-a-cart) step.
  - `price` - price of the item. You can retrieve this value from the [Simulating a cart](#simulating-a-cart) step.
  - (Optional) If the delivery method is pickup point, add the information `"selectedDeliveryChannel": "pickup-in-point"`.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=4:14
{
  "items": [],
  "clientProfileData": {},
  "shippingData": {
    "address": {},
    "logisticsInfo": [
        {
            "itemIndex": 0,
            "selectedSla": "Regular",
            "price": 100,
            "selectedDeliveryChannel": "pickup-in-point"
        }
    ]
  },
  "paymentData": {}
}
```

</CH.Code>

---

### `paymentData.payments`

`paymentData.payments` contains information regarding the chosen payment method and installment preferences for the order. Build the `paymentData.payments` array considering the response obtained from the [Simulating a cart](#simulating-a-cart) step. For each payment option, define the following elements:

- `paymentSystem` - ID of the desired payment system.
- `referenceValue` - reference value ysed to calculate interest rates. If no interest applies to the order, the `value` and `referenceValue` should be the same.
- `value` - total amount to be payed by the shopper.
- `installments` - number of installments.

For more complex examples, see the [Place order](https://developers.vtex.com/docs/api-reference/checkout-api#put-/api/checkout/pub/orders) API reference.

<CH.Code  show={["orderForm.json"]}>

```json orderForm.json focus=8:17
{
  "items": [],
  "clientProfileData": {},
  "shippingData": {
      "address": {},
      "logisticsInfo": []
  },
  "paymentData": {
      "payments": [
          {
              "paymentSystem": "1",
              "referenceValue": 10100,
              "value": 10100,
              "installments": 1
          }
      ]
  }
}
```

</CH.Code>

---

## Step 3 - Handling the order

This `orderForm` can now be sent as the body in the [Place order API request.](https://developers.vtex.com/docs/api-reference/checkout-api#put-/api/checkout/pub/orders)

### Reviewing the `orderForm` of a new customer  

When you are done consolidating all of your shopping cart information, your `orderForm` should look something like this.

<CH.Code show={["orderForm.json"]}>

```json orderForm.json
{
    "items": [
        {
            "id": "1",
            "quantity": 1,
            "seller": "1",
            "price": 10000
        }
    ],
    "clientProfileData": {
        "email": "email@domain.com",
        "firstName": "Testing",
        "lastName": "VTEX",
        "document": "078051120",
        "documentType": "ssn",
        "phone": "1234567890",
        "corporateName": null,
        "tradeName": null,
        "corporateDocument": null,
        "stateInscription": null,
        "corporatePhone": null,
        "isCorporate": false
    },
    "shippingData": {
        "address": {
            "addressType": "residential",
            "receiverName": "Testing VTEX",
            "postalCode": "33301",
            "city": "Fort Lauderdale",
            "state": "FL",
            "country": "USA",
            "street": "110 East Broward Blvd",
            "number": null,
            "neighborhood": null,
            "complement": "Suite 1700",
            "reference": null,
            "geoCoordinates": []
        },
        "logisticsInfo": [
            {
            "itemIndex": 0,
            "selectedSla": "Regular",
            "price": 100            
            }
        ]
    },
    "paymentData": {
        "payments": [
            {
            "paymentSystem": "1",
            "referenceValue": 10100,
            "value": 10100,
            "installments": 1
            }
        ]
    }
}
```

</CH.Code>

---

### Reviewing the `orderForm` of an existing customer

For a returning customer, it may be something like this.

<CH.Code show={["orderForm.json"]}>

```json orderForm.json
{
    "items": [
        {
            "id": "1",
            "quantity": 1,
            "seller": "1",
            "price": 10000
        }
    ],
    "clientProfileData": {
        "email": "email@domain.com"
    },
    "shippingData": {
        "address": {
            "addressId": "666c2e830bd9474ab6f6cc53fb6dd2d2"
        },
        "logisticsInfo": [
            {
            "itemIndex": 0,
            "selectedSla": "Regular",
            "price": 100
            }
        ]
    },
    "paymentData": {
        "payments": [
            {
            "paymentSystem": "1",
            "referenceValue": 10100,
            "value": 10100,
            "installments": 1
            }
        ]
    }
}
```

</CH.Code>

---

### Placing the order

If you get a status `201 Created` response, take note of four pieces of information from its response content:

- `orderId`: ID of the order within VTEX’s Order Management System (OMS). You can find an  `orderId` in each object in the `orders` array.
- `transactionId`: ID of the transaction, which can be found in the objects contained in the `transactionData.merchantTransactions` array.
- `addressId`: if you're going to use the same address for shipping and billing, get this ID from the `orders[].shippingData.address` object.
- `Vtex_CHKO_Auth`: authentication cookie that is sent with the response.

>❗ Starting from the placing of the order, you have five minutes to complete the payment process. Otherwise, the order is automatically canceled and tagged `incomplete`.

>❗ If you are using an email from a customer that already exists in your database, the account corresponding to the email address must be logged into your store. Otherwise, the process will fail.

<CH.Code show={["Shell", "Python", "Node.js", "Response"]}>

```shell Shell mark=2[17:29],2[31:43]
curl --request put \
 --url 'https://{accountname}.{environment}.com.br/api/checkout/pub/orders' \
 --header 'Accept: application/json' \
 --header 'Content-Type: application/json' \
 --header 'X-VTEX-API-AppKey: ' \
 --header 'X-VTEX-API-AppToken: ' \
 --data 'REPLACE_WITH_YOUR_ORDERFORM'
```

```python Python mark=3[37:49],3[51:63]
import http.client

conn = http.client.HTTPSConnection("{accountname}.{environment}.com.br")

payload = "REPLACE_WITH_YOUR_ORDERFORM"

headers = {
    'Accept': "application/json",
    'Content-Type': "application/json",
    'X-VTEX-API-AppKey': "",
    'X-VTEX-API-AppToken': ""
    }

conn.request("put", "/api/checkout/pub/orders", payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))
```

```js Node.js mark=5[15:27],5[29:41]
const http = require("https");

const options = {
 "method": "put",
 "hostname": "{accountname}.{environment}.com.br",
 "port": null,
 "path": "/api/checkout/pub/orders",
 "headers": {
  "Accept": "application/json",
  "Content-Type": "application/json",
  "X-VTEX-API-AppKey": "",
  "X-VTEX-API-AppToken": ""
 }
};

const req = http.request(options, function (res) {
 const chunks = [];

 res.on("data", function (chunk) {
  chunks.push(chunk);
 });

 res.on("end", function () {
  const body = Buffer.concat(chunks);
  console.log(body.toString());
 });
});

req.write(JSON.stringify(REPLACE_WITH_YOUR_ORDERFORM));
req.end();
```

---

```json Response mark=7,18,29
{
  "orderForm": null,
  "transactionData": {
    "merchantTransactions": [
        {
            "id": string,
            "transactionId": string,
            "merchantName": string,
            "payments": [],
            "transactionId": string,
        }
    ],
    "receiverUri": string,
    "gatewayCallbackTemplatePath": string
  },
  "orders": [
    {
        "orderId": string,
        "orderGroup": string,
        "state": null,
        "isCheckedIn": boolean,
        "sellerOrderId": string,
        "storeId": null,
        "checkedInPickupPointId": null,
        "value": number,
        "items": [],
        "shippingData": {
            "address": {
                "addressId": string
            }
        },
        "paymentData": {},
        "clientPreferencesData": null,
        "commercialConditionData": null,
        "giftRegistryData": null,
        "marketingData": null,
        "storePreferencesData": {},
        "openTextField": {},
        "invoiceData": null,
        "itemMetadata": {},
        "taxData": null,
        "customData": null,
        "hooksData": null,
        "changeData": null,
        "subscriptionData": null,
        "salesChannel": string,
        "followUpEmail": string,
        "creationDate": string,
        "lastChange": string,
        "timeZoneCreationDate": string,
        "timeZoneLastChange": string,
        "isCompleted": boolean,
        "hostName": string,
        "merchantName": null,
        "userType": string,
        "roundingError": number,
        "allowEdition": boolean,
        "allowCancellation": boolean,
        "isUserDataVisible": boolean,
        "allowChangeSeller": boolean,
        "orderFormCreationDate": string,
    }
  ],
  "salesAssociateData": {}
}
```

</CH.Code>

---

### Resolving the order payment

With the `orderId` and `transactionId` values in hand, you must now inform VTEX of the payment data that should be used to resolve the order payment. To do this, use the [Send payment information API request](https://developers.vtex.com/docs/api-reference/payments-gateway-api#post-/api/pub/transactions/-transactionId-/payments). Note that there is also an alternative [private request for sending payment information](https://developers.vtex.com/docs/api-reference/payments-gateway-api#post-/api/pvt/transactions/-transactionId-/payments), that can be used to send saved credit card data.

The information you send in this step’s request body should be based on the `paymentData` section of your `orderForm`.

> ℹ️️ In the `fields` object, you can send an `addressId` to use an existing address or a new `address` object.

>❗ Make sure that all value-related fields match the information sent in step four, when placing the order.

<CH.Code show={["Shell", "Python", "Node.js", "Response"]}>

```shell Shell mark=2[17:29],2[31:43]
curl --request post \
 --url 'https://{accountname}.vtexpayments.com.br/api/pub/transactions//payments' \
 --header 'Content-Type: application/json' \
 --header 'X-VTEX-API-AppKey: ' \
 --header 'X-VTEX-API-AppToken: ' \
 --data '[{"paymentSystem":4,"installments":1,"currencyCode":"BRL","value":100,"installmentsInterestRate":0,"installmentsValue":100,"referenceValue":100,"fields":{"holderName":"UserTest","cardNumber":"5378244888889174","validationCode":"231","dueDate":"10/19","document":"8041734561","accountId":"","address":null,"callbackUrl":""},"transaction":{"id":"{{transactionId}}","merchantName":"{{accountName}}"}}]'
```

```python Python mark=3[37:49],3[51:63]
import http.client

conn = http.client.HTTPSConnection("{accountname}.vtexpayments.com.br")

payload = "[{\"paymentSystem\":4,\"installments\":1,\"currencyCode\":\"BRL\",\"value\":100,\"installmentsInterestRate\":0,\"installmentsValue\":100,\"referenceValue\":100,\"fields\":{\"holderName\":\"UserTest\",\"cardNumber\":\"5378244888889174\",\"validationCode\":\"231\",\"dueDate\":\"10/19\",\"document\":\"8041734561\",\"accountId\":\"\",\"address\":null,\"callbackUrl\":\"\"},\"transaction\":{\"id\":\"{{transactionId}}\",\"merchantName\":\"{{accountName}}\"}}]"

headers = {
    'Content-Type': "application/json",
    'X-VTEX-API-AppKey': "",
    'X-VTEX-API-AppToken': ""
    }

conn.request("post", "/api/pub/transactions//payments", payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))
```

```js Node.js mark=5[15:27],5[29:41]
const http = require("https");

const options = {
 "method": "post",
 "hostname": "{accountname}.vtexpayments.com.br",
 "port": null,
 "path": "/api/pub/transactions//payments",
 "headers": {
  "Content-Type": "application/json",
  "X-VTEX-API-AppKey": "",
  "X-VTEX-API-AppToken": ""
 }
};

const req = http.request(options, function (res) {
 const chunks = [];

 res.on("data", function (chunk) {
  chunks.push(chunk);
 });

 res.on("end", function () {
  const body = Buffer.concat(chunks);
  console.log(body.toString());
 });
});

req.write(JSON.stringify([
  {
    paymentSystem: 4,
    installments: 1,
    currencyCode: 'BRL',
    value: 100,
    installmentsInterestRate: 0,
    installmentsValue: 100,
    referenceValue: 100,
    fields: {
      holderName: 'UserTest',
      cardNumber: '5378244888889174',
      validationCode: '231',
      dueDate: '10/19',
      document: '8041734561',
      accountId: '',
      address: null,
      callbackUrl: ''
    },
    transaction: {id: '{{transactionId}}', merchantName: '{{accountName}}'}
  }
]));
req.end();
```

---

```json Response
{}
```

</CH.Code>

---

## Step 4 - Processing the order

Finally, you must request the processing of the order with the [Process order API request](https://developers.vtex.com/docs/api-reference/checkout-api#post-/api/checkout/pub/gatewayCallback/-orderGroup-).

At this point, if everything is ok with the payment, the order should be placed. Otherwise, you should get a `status 500` error.

> Be aware that this process uses the gateway connectors configured in your VTEX environment. Be careful to avoid any unwanted charges or unexpected payment denials.

<CH.Code show={["Shell", "Python", "Node.js", "Response"]}>

```shell Shell mark=2[17:29],2[31:43],2[86:97],5[21:28]
curl --request post \
  --url 'https://{accountname}.{environment}.com.br/api/checkout/pub/gatewayCallback/{orderGroup}' \
  --header 'Accept: application/json' \
  --header 'Content-Type: application/json' \
  --header 'Cookie: {cookie}' \
  --header 'X-VTEX-API-AppKey: ' \
  --header 'X-VTEX-API-AppToken: '
```

```python Python mark=3[37:49],3[51:63]
import http.client

conn = http.client.HTTPSConnection("{accountname}.{environment}.com.br")

headers = {
    'Cookie': "Vtex_CHKO_Auth=0e/RpYIEZu19BuwXB4tZ7eIGu9HT8vdUAHWQDHDpxMc=; CheckoutDataAccess=0e/PoiTEZu19BuwXB4tZ7eIGu9HT8vdUAHWQDHDpxMc=",
    'Accept': "application/json",
    'Content-Type': "application/json",
    'X-VTEX-API-AppKey': "",
    'X-VTEX-API-AppToken': ""
    }

conn.request("post", "/api/checkout/pub/gatewayCallback/123456789", headers=headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))
```

```js Node.js mark=5[15:27],5[29:41]
const http = require("https");

const options = {
 "method": "post",
 "hostname": "{accountname}.{environment}.com.br",
 "port": null,
 "path": "/api/checkout/pub/gatewayCallback/123456789",
 "headers": {
  "Cookie": "Vtex_CHKO_Auth=0e/RpYIEZu19BuwXB4tZ7eIGu9HT8vdUAHWQDHDpxMc=; CheckoutDataAccess=0e/PoiTEZu19BuwXB4tZ7eIGu9HT8vdUAHWQDHDpxMc=",
  "Accept": "application/json",
  "Content-Type": "application/json",
  "X-VTEX-API-AppKey": "",
  "X-VTEX-API-AppToken": ""
 }
};

const req = http.request(options, function (res) {
 const chunks = [];

 res.on("data", function (chunk) {
  chunks.push(chunk);
 });

 res.on("end", function () {
  const body = Buffer.concat(chunks);
  console.log(body.toString());
 });
});

req.end();
```

---

```json Response
{}
```

</CH.Code>

---

### Verifying the order placement

You should be able to verify your order was in fact placed in the [Order management module](https://help.vtex.com/en/tutorial/orders-list--tutorials_200#) in VTEX Admin.

You can also use the API requests [Get order](https://developers.vtex.com/docs/api-reference/orders-api#get-/api/oms/pvt/orders/-orderId-) and [List orders](https://developers.vtex.com/docs/api-reference/orders-api#get-/api/oms/pvt/orders) for this purpose.

<CH.Code show={["Shell", "Python", "Node.js", "Body"]}>

```shell Shell mark=2[18:30],2[32:44],5[32:39],6[34:43]
```

```python Python mark=3[37:49],3[51:63]
```

```js Node.js mark=5[15:27],5[29:41]
```

---

```json Response
{}
```

</CH.Code>

</CH.Spotlight>
