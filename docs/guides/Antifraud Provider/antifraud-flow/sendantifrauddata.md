---
title: "Send Antifraud Data"
slug: "sendantifrauddata"
excerpt: "Receives a new transaction antifraud data. This step is performed only if all payments are authorized."
hidden: false
createdAt: "2020-05-13T21:52:02.370Z"
updatedAt: "2022-08-01T17:02:34.058Z"
---
VTEX expects that your antifraud provider process this request and retrieves the process result, VTEX order flow will follow your response status in order to cancel or approve the transaction

#### REQUEST HEADERS

---

<table>
  <tr>
        <td><b>Header</b></td>
        <td><b>Value</b></td>
    </tr>
    <tr>
        <td><code>X-PROVIDER-API-AppKey</code></td>
        <td><b>{{X-PROVIDER-API-AppKey}}</b></td>
    </tr>
    <tr>
        <td><code>X-PROVIDER-API-AppToken</code></td>
        <td><b>{{X-PROVIDER-API-AppToken}}</b></td>
    </tr>
    <tr>
        <td><code>Content-Type</code></td>
        <td><b>application/json</b></td>
    </tr>
</table>

#### REQUEST BODY

---

<table>
<tr>
        <th>Name</th>
        <th>Type</th>
        <th>Mandatory</th>
        <th>Description</th>
    </tr>
    <tr>
        <td><code>reference</code></td>
        <td><b>string</b> <b>max 255 chars</b></td>
    <td> Yes </td>
        <td>VTEX order reference key. The key of the order (from VTEX OMS system) related with this payment</td>
    </tr>
    <tr>
        <td><code>id</code></td>
        <td><b>string</b> <b>max 255 chars</b></td>
    <td> Yes </td>
        <td>VTEX transaction ID. The ID of the transaction related with this payment.</td>
    </tr>
    <tr>
        <td><code>value</code></td>
        <td><b>decimal</b> <b>ex 20.95</b></td>
          <td> Yes </td>
        <td>VTEX transaction order value</td>
    </tr>
    <tr>
        <td><code>ip</code></td>
        <td><b>string</b> <b>ip format</b></td>
          <td> Yes </td>
        <td>The original ip addres <b>from browser</b></td>
    </tr>
    <tr>
        <td><code>deviceFingerprint</code></td>
        <td><b>string</b></td>
          <td> </td>
        <td>Device fingerprint generated by the provider. this is generated by using Google Tag Manager that the provider implements. This field is optional, is sent only if received. See <b> Implement Device Fingerprint </b></td>
    </tr>
        <tr>
        <td><code>store</code></td>
        <td><b>string</b></td>
          <td> Yes </td>
        <td>VTEX has a main Name for the store. This unique name is often used in url to access VTEX configurations.</td>
    </tr>
    <tr>
        <td><code>miniCart</code></td>
        <td><b>object</b></td>
          <td>Yes</td>
        <td>Mini cart data</td>
    </tr>
    <tr>
      <td>&#x21B3;<code>buyer</code></td>
        <td><b>object</b></td>
          <td>Yes</td>
        <td>Buyer data</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>id</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
<td>VTEX buyer ID. The unique identifier of the buyer</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>firstName</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>First name of the buyer</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>lastName</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>Last name of the buyer</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>document</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>Document number of the buyer</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>documentType</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>Type of document of the buyer. It depends on the coutry. See <b> Document Types by Country </b></td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>email</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>Email of the buyer</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>phone</code></td>
        <td><b>string</b> <b>max 255</b></td>
        <td>Yes</td>
        <td>Phone number of the buyer</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>address</code></td>
        <td><b>object</b></td>
         <td>Yes</td>
        <td>buyer address</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>country</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address country</td>
    </tr>
    <tr>
        <td> &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>street</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address street</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>number</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address number</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>complement</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address complement</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>neighborhood</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address neighborhood</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &#x21B3; <code>postalCode</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address postal code</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &#x21B3; <code>city</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address city</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &#x21B3; <code>state</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Buyer address state</td>
    </tr>
    <tr>
        <td><code>shipping</code></td>
        <td><b>object</b></td>
         <td> Yes </td>
        <td>Shipping data</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>value</code></td>
        <td><b>decimal</b></td>
         <td> Yes</td>
        <td>Shipping value with two decimal places</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>estimatedDate</code></td>
        <td><b>date</b> 2028-06-15T21:15:07</td>
        <td>Yes</td>
        <td>Estimated shipping date ISO 8601</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>address</code></td>
        <td><b>object</b></td>
         <td>Yes</td>
        <td>Shipping address</td>
    </tr>
    <tr>
        <td> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>country</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Shipping address country</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>street</code></td>
        <td><b>string</b></td>
        <td>Yes</td>
        <td>Shipping address street</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>number</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Shipping address number</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>complement</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Shipping address complement</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>neighborhood</code></td>
        <td><b>string</b></td>
        <td>Yes</td>
        <td>Shipping address neighborhood</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>postalCode</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>Shipping address postal code</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x21B3;<code>city</code></td>
        <td><b>string</b></td>
        <td>Yes</td>
        <td>Shipping address city</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>state</code></td>
        <td><b>string</b></td>
       <td>Yes</td>
        <td>Shipping address state</td>
    </tr>
    <tr>
        <td><code>items</code></td>
        <td><b>array of object</b></td>
         <td>Yes</td>
        <td>List of items data, in the cart</td>
    </tr>
    <tr>
        <td>&#x21B3;<code>id</code></td>
        <td><b>string</b></td>
         <td> Yes</td>
        <td>VTEX product ID. The ID of the item</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>name</code></td>
        <td><b>string</b></td>
         <td> Yes</td>
        <td>Item name</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>price</code></td>
        <td><b>decimal</b></td>
         <td>Yes</td>
        <td>Item price</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>quantity</code></td>
        <td><b>integer</b></td>
        <td>Yes</td>
        <td>Quantity of this item in the cart</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>deliveryType</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>Type of delivery configured by the store. ex. Normal</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>deliverySlaInMinutes</code></td>
        <td><b>integer</b></td>
         <td>Yes</td>
        <td>Each item can have a separate shipping sla in minutes</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>categoryId</code></td>
        <td><b>integer</b></td>
         <td>Yes</td>
        <td>Category ID for the Item. Configured by each store</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>categoryName</code></td>
        <td><b>string</b> <b>max 255</td>
         <td>Yes</td>
        <td>Category name for the Item. Configured by each store</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>discount</code></td>
        <td><b>decimal</b></td>
        <td>Yes</td>
        <td>Discount applied on item(s) two decimal places</td>
    </tr>
 <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>sellerId</code></td>
        <td><b>string</b></td>
        <td>Yes</td>
        <td>In case of a marketplace transaction, this is the Id of the seller for this specific item. Otherwise, this is filled with a '1'</td>
    </tr>
    <tr>
        <td><code>taxValue</code></td>
        <td><b>decimal</b></td>
        <td>Yes</td>
        <td>Total tax value</td>
    </tr>
    <tr>
        <td><code>listRegistry</code></td>
        <td><b>object</b></td>
         <td>  </td>
        <td>List registry indicates the existence of a list, like wishList, giftList or any other defined by the store</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>name</code></td>
        <td><b>string</b> <b>max 255</b></td>
        <td>  </td>
        <td>List name defined by the store</td>
    </tr>
    <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp; &#x21B3;<code>deliveryToOwner</code></td>
        <td><b>boolean</b></td>
       <td>  </td>
        <td>Flag to mark if the order will be delivered to list creator or not.</td>
    </tr>
    <tr>
        <td><code>payments</code></td>
        <td><b>array of object</b></td>
         <td>Yes</td>
        <td>Describes the payments used for the current order</td>
    </tr>
    <tr>
        <td>&#x21B3;<code>id</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>Payment ID unique identifier in VTEX</td>
    </tr>
    <tr>
        <td>&#x21B3;<code>method</code></td>
        <td><b>string</b> <b>max 255</td>
         <td>Yes</td>
        <td>Payment method used for the buyer.  See <b> Payment Methods <b> </td>
    </tr>
    <tr>
        <td>&#x21B3;<code>name</code></td>
        <td><b>string</b> <b>max 255</b></td>
         <td>Yes</td>
        <td>Payment name used for the buyer. This name could be the brand card or the VTEX payment method ex. Visa </td>
    </tr>
    <tr>
        <td>&#x21B3;<code>value</code></td>
        <td><b>decimal</b></td>
         <td>Yes</td>
        <td>Payment value. Two decimal places</td>
    </tr>
<tr>
        <td>&#x21B3;<code>currencyIso4217</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>The currency used in each payment in the Transaction. It must be in the ISO 4217 format.</td>
    </tr>
    <tr>
        <td>&#x21B3;<code>instalments</code></td>
        <td><b>integer</b></td>
        <td>Yes</td>
        <td>Number of installments</td>
    </tr>
      <td><code>Details</code></td>
        <td><b>array of object</b></td>
         <td>Yes</td>
        <td>Payment details</td>
    </tr>
    <tr>
        <td>&#x21B3;<code>bin</code></td>
        <td><b>string</b> <b>max 255</b></td>
        <td>Yes</td>
        <td>Abbreviation for 'Bank Indetification Number'. It's a code that identifies the institution responsable for issuing the credit card</td>
    </tr>
<tr>
        <td>&#x21B3;<code>lastDigits</code></td>
        <td><b>string</b> </td>
         <td>Yes</td>
        <td>Credit card identifier number last digits<b> </td>
    </tr>
    <tr>
        <td>&#x21B3;<code>holder</code></td>
        <td><b>string</b> </td>
         <td>Yes</td>
        <td>Credit card owner<b> </td>
    </tr>
    <tr>
        <td><code>hook</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>URL to be called when the payment has it's status changed</td>
    </tr>
 <tr>
        <td><code>transactionStartDate</code></td>
        <td><b>string</b></td>
         <td>Yes</td>
        <td>The date and time when the transaction started. It must be in the ISO 8601 format</td>
    </tr>
</table>

#### RESPONSE BODY

---

<table>
    <tr>
        <td><code>id</code></td>
        <td><b>string</b></td>
        <td>VTEX transaction ID. The ID of this transaction must be in the response.</td>
    </tr>
        <tr>
        <td><code>tid</code></td>
        <td><b>string</b></td>
     <td>Provider transaction ID. The ID of this transaction must be in the response. The antifraud provider MUST generates an unique transaction Id.</td>
    </tr>
    <tr>
        <td><code>status</code></td>
        <td><b>string</b></td>
        <td>Transaction status from provider. Must be one of the values: <code>received</code>, <code>undefined</code>, <code>approved</code>, or <code>denied</code>.</td>
    </tr>
    <tr>
        <td><code>score</code></td>
        <td><b>decimal</b></td>
        <td>The value of the risk score. 100.00 as max value means total fraud</td>
    </tr>
    <tr>
        <td><code>analysisType</code></td>
        <td><b>string</b></td>
        <td>Analysis type. Valid values are <code>authomatic</code> or <code>manual</code> </td>
    </tr>
    <tr>
        <td><code>responses<code>&nbsp;(optional)</td>
        <td><b>dictionary or string, string</b></td>
        <td>Key Value dictionary to add custom responses from  analysis</td>
    </tr>
    <tr>
        <td><code>code<code>&nbsp;(optional)</td>
        <td><b>string</b></td>
        <td>Error code returned from provider. <b>Will be logged in transaction interactions log</b></td>
    </tr>
    <tr>
        <td><code>message<code>&nbsp;(optional)</td>
        <td><b>string</b></td>
        <td>Error message returned from provider. <b>Will be logged in transaction interactions log</b></td>
    </tr>
</table>

#### REQUEST EXAMPLES AND THEIR RESPONSES

---
[block:code]
{
  "codes": [
    {
      "code": "curl --location --request POST '{{antifraud-provider-service-url}}/transactions' \\\n--header 'Content-Type: application/json' \\\n--header 'X-PROVIDER-API-AppKey: ProviderAppKey' \\\n--header 'X-PROVIDER-API-AppToken: ProviderAppToken' \\\n--data-raw '{\n  \"id\": \"D3AA1FC8372E430E8236649DB5EBD08E\",\n  \"reference\": \"v32478982vtx-01\",\n  \"value\": 10,\n  \"ip\": \"10.0.0.1\",\n  \"deviceFingerprint\": \"Generated_using_GTM_Store_Is_Responsible_To_Configure\",\n  \"miniCart\": {\n    \"buyer\": {\n      \"id\": \"c1245228-1c68-11e6-94ac-0afa86a846a5\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"document\": \"012.345.678-90\",\n      \"documentType\": \"CPF\",\n      \"email\": \"john@doe.com\",\n      \"phone\": \"+5521987654321\",\n      \"address\": {\n        \"country\": \"BRA\",\n        \"street\": \"Rua Praia de Botafogo\",\n        \"number\": \"518\",\n        \"complement\": \"2o. andar\",\n        \"neighborhood\": \"Botafogo\",\n        \"postalCode\": \"22250-040\",\n        \"city\": \"Rio de Janeiro\",\n        \"state\": \"RJ\"\n      }\n    },\n    \"shipping\": {\n      \"value\": 8.41,\n      \"estimatedDate\": \"2017-08-02T14:46:47\",\n      \"address\": {\n        \"country\": \"BRA\",\n        \"street\": \"Rua Praia de Botafogo\",\n        \"number\": \"518\",\n        \"complement\": \"2o. andar\",\n        \"neighborhood\": \"Botafogo\",\n        \"postalCode\": \"22250-040\",\n        \"city\": \"Rio de Janeiro\",\n        \"state\": \"RJ\"\n      }\n    },\n    \"items\": [\n      {\n        \"id\": \"132981\",\n        \"name\": \"Some useful product\",\n        \"price\": 20.51,\n        \"quantity\": 2,\n        \"deliveryType\": \"Normal\",\n        \"deliverySlaInMinutes\": 4320,\n        \"categoryId\": \"111\",\n        \"categoryName\": \"Electronica\",\n        \"discount\": 1.99,\n        \"sellerId\": \"vtexargentina\"\n      },\n      {\n        \"id\": \"123242\",\n        \"name\": \"Some useless product\",\n        \"price\": 21.98,\n        \"quantity\": 1,\n        \"deliveryType\": \"Normal\",\n        \"deliverySlaInMinutes\": 4320,\n        \"categoryId\": \"123\",\n        \"categoryName\": \"Lar\",\n        \"discount\": 1.01,\n        \"sellerId\": \"vtexargentina\"\n      }\n    ],\n    \"taxValue\": 5.58,\n    \"listRegistry\": {\n      \"name\": \"Minha lista Presente\",\n      \"deliveryToOwner\": false\n    }\n  },\n  \"payments\": [\n    {\n      \"id\": \"2D00FEBB5D7A43D598A99CFC43ADF158\",\n      \"method\": \"CreditCard\",\n      \"name\": \"Visa\",\n      \"value\": 63.98,\n      \"installments\": 3,\n      \"details\": {\n        \"bin\": \"507860\",\n        \"lastDigits\": \"2798\",\n        \"holder\": \"John Doe\",\n        \"address\": {\n          \"country\": \"BRA\",\n          \"street\": \"Rua Praia de Botafogo\",\n          \"number\": \"518\",\n          \"complement\": \"2o. andar\",\n          \"neighborhood\": \"Botafogo\",\n          \"postalCode\": \"22250-040\",\n          \"city\": \"Rio de Janeiro\",\n          \"state\": \"RJ\"\n        }\n      },\n      \"currencyIso4217\": \"BRL\"\n    },\n    {\n      \"id\": \"04D430E517B2494FBC3DF7721CCDACC7\",\n      \"method\": \"GiftCard\",\n      \"value\": 10.01,\n      \"installments\": 1\n    }\n  ],\n  \"hook\": \"https://hook.vtex,com/notifyIfChangeStatus\",\n  \"transactionStartDate\": \"2020-10-30T18:08:23Z\"\n}'",
      "language": "curl",
      "name": "Send Antifraud Data"
    }
  ]
}
[/block]

[block:code]
{
  "codes": [
    {
      "code": "{\n  \"id\": \"D3AA1FC8372E430E8236649DB5EBD08E\",\n  \"tid\": \"4692c1f54d514fe69da0b472a3b2a770\",\n  \"code\": \"customCode\",\n  \"message\": \"customMessage\",\n  \"status\": \"received\",\n  \"score\": 5.01,\n  \"analysisType\": \"authomatic\",\n  \"responses\": {\n    \"foo\": \"anyFoo\",\n    \"custom\": \"customAnyValue\"\n  }\n}",
      "language": "curl",
      "name": "200 - OK"
    }
  ]
}
[/block]
